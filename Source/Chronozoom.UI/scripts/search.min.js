var CZ;(function(n){(function(t){function h(){n.Tours.isTourWindowVisible&&n.Tours.onTourClicked&&n.Tours.onTourClicked();t.isSearchWindowVisible?($(".search-icon").removeClass("active"),$("#search").hide("slide",{},"slow")):($(".search-icon").addClass("active"),$("#search").show("slide",{},"slow",function(){$("#searchTextBox").focus()}));t.isSearchWindowVisible=!t.isSearchWindowVisible}function c(){$("#searchTextBox").focus(function(){$(this).hasClass("emptyTextBox")&&(this.value="",$(this).removeClass("emptyTextBox"))}).blur(function(){$(this).hasClass("emptyTextBox")?this.value!=""&&$(this).removeClass("emptyTextBox"):this.value==""&&(this.value="type here...",$(this).addClass("emptyTextBox"))}).keyup(function(){i&&(clearTimeout(i),i=null);i=setTimeout(function(){$("#searchTextBox").val()!=""&&$("#loadingImage").fadeIn("slow");o(s($("#searchTextBox")[0].value.substr(0,700)))},300)});$("#search").hide()}function l(t){if(!n.Authoring.isActive){var i=n.Common.setVisibleByUserDirectly(t.newvisible);i&&(n.Common.setNavigationStringTo={element:t.element,id:i})}}function a(t){var i,r;t&&!n.Authoring.isActive&&(i=n.UrlNav.navStringToVisible(t,n.Common.vc),i&&(r=n.Common.setVisibleByUserDirectly(i),r&&(n.Common.setNavigationStringTo={bookmark:t,id:r})))}function f(t,i){var u=v(n.Common.vc.virtualCanvas("getLayerContent"),t,i),f=n.UrlNav.vcelementToNavString(u),r;n.StartPage.hide();r=n.UrlNav.navStringToVisible(f,n.Common.vc);n.Common.controller.moveToVisible(r)}function v(t,i,r){var f=r==="contentItem",u=function(t,i){var o,r,e,s,h;if(t.id===i)return t;if(!t.children)return null;for(o=t.children.length,r=0;r<o;r++)if(e=t.children[r],e.id===i)return e;for(r=0;r<o;r++)if(e=t.children[r],s=u(e,i),s)return s;return f&&t.type==="infodot"&&(h=n.VCContent.getContentItem(t,i),h!=null)?h:null};return u(t,i)}function e(n,t){var i,e,h;(s($("#searchTextBox")[0].value).indexOf(n)===0||n==="")&&(i=$("#search .searchResults").empty(),t==null||(t.length==0?$("<div><\/div>",{"class":"searchNoResult",text:"No results"}).appendTo(i):(e=function(n,r){for(var u,o,s,h=!0,e=0;e<t.length;e++)if(u=t[e],u.objectType==n){switch(u.objectType){case 0:o="e"+u.id;s="exhibit";break;case 1:o="t"+u.id;s="timeline";break;case 2:o=u.id;s="contentItem";break;default:continue}h&&($("<div><\/div>",{"class":"searchResultSection",text:r}).appendTo(i),h=!1);$("<div><\/div>",{"class":"searchResult",resultId:o,text:t[e].title,click:function(){f(this.getAttribute("resultId"),this.getAttribute("data-element-type"))}}).attr("data-element-type",s).appendTo(i)}},e(1,"Timelines"),e(0,"Exhibits"),e(2,"Artifacts"))));u&&(u=!1);r!=null&&(h=r,r=null,o(h));$("#loadingImage").fadeOut("slow")}function o(t){if(u){r=t;return}if(u=!0,!t||t===""){setTimeout(function(){e(t)},1);return}var i;switch(n.Settings.czDataSource){case"db":i="/api/Search";break;default:i="/api/Search"}$.ajax({cache:!1,type:"GET",async:!0,dataType:"json",data:{searchTerm:t,supercollection:n.Service.superCollectionName,collection:n.Service.collectionName},url:i,success:function(n){e(t,n.d)},error:function(n){console.log("Error connecting to service: "+n.responseText)}})}function s(n){return n===null?"":(n&&(n=n.replace(new RegExp('"',"g"),"")),n)}var i,r,u;t.isSearchWindowVisible=!1;i=null;t.onSearchClicked=h;t.initializeSearch=c;t.navigateToElement=l;t.navigateToBookmark=a;t.goToSearchResult=f;r=null;u=!1})(n.Search||(n.Search={}));var t=n.Search})(CZ||(CZ={}));
/*
//# sourceMappingURL=search.min.js.map
*/