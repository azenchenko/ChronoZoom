var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},CZ;(function(n){(function(t){var i=function(t){function r(r,f){i=this;t.call(this,r,f);this.exhibits=f.context.exhibits;this.mapType=f.context.mapType;this.timeline=f.context.timeline;switch(f.context.mapType){case"africa":u=n.Map.prototype.MapAfrica.call(n.Common.map,this.exhibits,f.context.timeline);break;case"usa-albers":u=n.Map.prototype.MapUSA.call(n.Common.map,this.exhibits,f.context.timeline)}u.show();this.$navBackBtn=this.container.find(f.navBackBtn);this.mapEvents=[];this.notMapEvents=[];Object.keys(this.exhibits).forEach(function(n){i.exhibits[n].mapAreaId===null?i.notMapEvents.push(i.exhibits[n]):i.mapEvents.push(i.exhibits[n])});this.newMapEventForm={$container:this.container.find(f.newMapEventForm.container),$titleTextblock:this.container.find(f.newMapEventForm.titleTextblock),$emptyListPlaceholder:this.container.find(f.newMapEventForm.emptyListPlaceholder),$eventsListbox:this.container.find(f.newMapEventForm.eventsListbox),eventsListboxTemplate:f.newMapEventForm.eventsListboxTemplate,eventsListbox:new n.UI.NewMapEventListbox(r.find(f.newMapEventForm.eventsListbox),f.newMapEventForm.eventsListboxTemplate,this.notMapEvents)};this.currentMapEventsForm={$container:this.container.find(f.currentMapEventsForm.container),$titleTextblock:this.container.find(f.currentMapEventsForm.titleTextblock),$emptyListPlaceholder:this.container.find(f.currentMapEventsForm.emptyListPlaceholder),$eventsListbox:this.container.find(f.currentMapEventsForm.eventsListbox),$eventsListboxTemplate:this.container.find(f.currentMapEventsForm.eventsListboxTemplate),eventsListbox:new n.UI.CurrentMapEventsListbox(r.find(f.currentMapEventsForm.eventsListbox),f.currentMapEventsForm.eventsListboxTemplate,this.mapEvents)};this.initialize()}var i,u,f;return __extends(r,t),r.prototype.initialize=function(){this.mapEvents.length>0?(this.currentMapEventsForm.$eventsListbox.show(),this.currentMapEventsForm.$emptyListPlaceholder.hide()):(this.currentMapEventsForm.$eventsListbox.hide(),this.currentMapEventsForm.$emptyListPlaceholder.show());this.notMapEvents.length>0?(this.newMapEventForm.$eventsListbox.show(),this.newMapEventForm.$emptyListPlaceholder.hide()):(this.newMapEventForm.$eventsListbox.hide(),this.newMapEventForm.$emptyListPlaceholder.show());this.$navBackBtn.on("click",f);this.container.on("emptylistbox",function(n,t){switch(t){case"newMapEventListbox":i.newMapEventForm.$eventsListbox.hide();i.newMapEventForm.$emptyListPlaceholder.show();break;case"eventsOnMapListbox":i.currentMapEventsForm.$eventsListbox.hide();i.currentMapEventsForm.$emptyListPlaceholder.show()}});this.container.on("mapeventremoved",function(n,t){var r=t.item,u=t.id;r.data.mapAreaId=null;i.currentMapEventsForm.eventsListbox.remove(r);try{$(".subunit[data-id='"+u+"']").attr("class",$(".subunit[data-id='"+u+"']").attr("class").replace(/selected/g,""))}catch(f){}i.currentMapEventsForm.eventsListbox.items.length===0&&(i.currentMapEventsForm.$eventsListbox.hide(),i.currentMapEventsForm.$emptyListPlaceholder.show());i.newMapEventForm.eventsListbox.add(r.data)})},r.prototype.addMapEvent=function(n,t){t=typeof t=="undefined"?this.newMapEventForm.eventsListbox.listboxSelectedItemIndex:t;var i=this.newMapEventForm.eventsListbox.items[t],r=$(".subunit[data-id='"+n+"']").attr("class");$(".subunit[data-id='"+n+"']").attr("class",r+" selected");i.data.mapAreaId=n;this.newMapEventForm.eventsListbox.removeAt(t);this.currentMapEventsForm.eventsListbox.add(i.data,n);this.currentMapEventsForm.eventsListbox.items.length>0&&(this.currentMapEventsForm.$eventsListbox.show(),this.currentMapEventsForm.$emptyListPlaceholder.hide())},r.prototype.show=function(){t.prototype.show.call(this,{effect:"slide",direction:"left",duration:500})},r.prototype.close=function(){t.prototype.close.call(this,{effect:"slide",direction:"left",duration:500,complete:function(){i.newMapEventForm.eventsListbox.clear();i.currentMapEventsForm.eventsListbox.clear()}})},f=function(){i.back();u.hide()},r}(n.UI.FormBase);t.FormEditMapView=i})(n.UI||(n.UI={}));var t=n.UI})(CZ||(CZ={}));
/*
//# sourceMappingURL=auth-edit-map-view-form.min.js.map
*/